## Требования: создание Героя

### Цель
Определить пользовательские потоки, экраны, правила навигации, сохранения и валидации для мастера создания Героя в приложении (целевой платформой является Windows, MAUI).

### Область охвата
- Создание и редактирование черновиков Героев.
- Пять логических экранов (шагов), которые могут скрываться/меняться:
  1) Раса
  2) Предыстория
  3) Профессия/Способ выживать
  4) Хобби
  5) Характеристики

### Навигация и прогресс
- Навигация осуществляется через меню вверху экрана (вкладки/табы со списком доступных экранов).
- Пользователь может переходить на любой экран напрямую, независимо от заполнения предыдущих.
- Экраны могут быть динамически скрыты/переименованы/заменены в зависимости от выбранных значений и зависимостей.
- Прогресс-бар отображается всегда; 100% — когда заполнены все доступные на текущий момент поля (с учётом скрытых/недоступных шагов).

### Сохранение данных
- Автосохранение при каждом изменении (без явной кнопки «Сохранить»).
- Текущее хранилище — память приложения (in-memory state).
- Архитектура должна предусматривать дальнейшую замену/расширение на локальную БД и последующую синхронизацию с сервером (без изменения контрактов UI/домена).
- После перезапуска приложения сохранение in-memory не гарантируется (на данном этапе).

### Справочники и ввод данных
- Все поля выбираются из заранее подготовленных справочников (нет произвольного ввода).
- Ожидаются большие каталоги значений; необходима поддержка эффективной загрузки/кеширования/поиска (ленивая подгрузка, фильтры, пагинация при необходимости).
- Ограничения для изображений/ассетов Героя: до 4K.

### Подсказки (help/tooltip)
- Для всех полей обязательны подсказки:
  - Краткая версия показывается при наведении на значок вопроса рядом с вариантом ответа.
  - Если подсказка открыта и пользователь нажимает Tab, отображается полная версия подсказки.
- Для заблокированных вариантов при наведении показывать пояснение причины блокировки.

### Зависимости и правила
- Есть зависимости между выбранными значениями. Базовые правила:
  - При выборе предыстории «Дитя улиц» экран «Профессия» недоступен; вместо него показывается «Способ выживать», где пользователь выбирает способ, как он выживал на улицах.
  - Между различными вариантами возможны дополнительные ограничения (например, несовместимость профессии с расой и т.п.). Такие варианты отображать, но блокировать с подсказкой причины.
- У героя может быть:
  - Ровно одна предыстория.
  - Ровно одна профессия (если применимо; при «Дитя улиц» — отсутствует профессия, используется «Способ выживать»).
  - Множественный выбор хобби.

### Экран «Характеристики»
- Бюджет очков: 75.
- Должны быть реализованы ограничения по минимумам/максимумам характеристик (конкретные параметры уточняются отдельно) и проверка бюджета.
- Модификаторы от расы/предыстории/профессии могут влиять на характеристики (расчётные поля, отображение итоговых значений) — заложить расширяемую модель.

### Валидация и доступность вариантов
- Валидация выполняется на каждом экране и при финализации.
- Недоступные варианты должны отображаться в общем списке, но быть заблокированными для выбора; при наведении — подсказка с объяснением.
- Завершение создания допускается только при удовлетворении обязательных зависимостей и ограничений (конкретный набор обязательных полей согласовать отдельно).

### Многоверсионность и черновики
- Можно одновременно хранить несколько героев-черновиков и переключаться между ними.
- Каждый черновик включает все выбранные значения и незавершённые шаги.
- Имена/идентификаторы черновиков — уникальные в пределах устройства (способ генерации/назначения — уточняется).

### Локализация
- Текущий язык интерфейса — русский.
- Архитектурно предусмотреть последующее добавление английской локализации (ресурсы строк, справочники, подсказки).

### Платформы и производительность
- Целевая платформа: Windows (MAUI). UX должен быть адаптирован под десктоп.
- Производительность: операции выбора/фильтрации в больших справочниках должны быть отзывчивыми; предусмотреть кеширование и оптимизацию запросов к данным.

### UI/UX требования
- Верхнее меню навигации по экранам (табы) с индикаторами доступности/заполненности.
- Прогресс-бар с динамическим пересчётом на основе списка «активных» (нескрытых) полей.
- Превью итоговых характеристик в реальном времени при изменении зависимых полей (по возможности).
- Единый стиль подсказок: краткая и полная версии; поддержка клавиатуры (Tab) для разворота.

### Нефункциональные требования и будущее развитие
- Безопасность: шифрование локальных данных на текущем этапе не требуется.
- Синхронизация с сервером отсутствует сейчас; должна быть предусмотрена в архитектуре (абстракции репозиториев/провайдеров данных, идемпотентные операции).
- Переход с in-memory на локальную БД: минимальные изменения доменной логики и UI.

### Критерии приёмки (минимальный набор)
- Можно создать несколько черновиков Героев и переключаться между ними.
- На каждом экране:
  - значения выбираются из справочников;
  - автосохранение фиксирует изменения без кнопки «Сохранить»;
  - недоступные варианты видимы, но заблокированы; указывают причину при наведении;
  - подсказки работают: краткая при наведении, полная по Tab при открытой подсказке.
- Прогресс-бар достигает 100% только при заполнении всех доступных полей.
- При предыстории «Дитя улиц» отсутствует экран «Профессия», доступен «Способ выживать».
- На экране «Характеристики» соблюдается бюджет 75 очков и ограничения.

### Открытые вопросы
- Перечень конкретных характеристик, их диапазоны и формулы модификаторов.
- Точные правила совместимости/несовместимости справочных значений.
- UX деталей больших справочников: поиск, группировка, пагинация.
- Формат и хранение изображений/ассетов, требования к памяти/кешу.


