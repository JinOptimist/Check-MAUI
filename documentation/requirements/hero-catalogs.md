## Справочники: мастер создания Героя

Этот документ описывает эталонные (типовые) справочники, используемые на пяти логических экранах мастера создания героя: `Раса`, `Предыстория`, `Профессия/Способ выживать`, `Хобби`, `Характеристики`.

- Язык интерфейса: русский.
- Все значения выбираются из справочников, произвольного ввода нет.
- Для каждого элемента приведены краткая и полная подсказки. Краткая подсказка показывается во всплывающей подсказке рядом с вариантом; при нажатии Tab по открытому хинту раскрывается полная подсказка.
- Недоступные варианты должны быть видимы, но заблокированы; при наведении показывается причина блокировки (динамическая, зависит от выбранных значений).
- Особое правило навигации: при `Предыстория = Дитя улиц` экран `Профессия` скрывается, вместо него отображается экран `Способ выживать`.

Структура описаний ниже предназначена для UI/доменной модели и может быть расширена без изменения контрактов при переходе на локальную БД/синхронизацию.

---

### Раса

Базовые варианты рас со справочной информацией и подсказками. Совместимость с профессиями может накладывать ограничения (варианты остаются видимыми, но становятся недоступными с пояснением причины).

- id: `human`
  - Наименование: Люди
  - Краткая подсказка: Универсальная и адаптивная раса без ярко выраженных ограничений.
  - Полная подсказка: Люди известны гибкостью и разнообразием талантов. Не имеют врождённых сильных бонусов, но редко сталкиваются с жёсткими ограничениям по профессиям.

- id: `elf`
  - Наименование: Эльфы
  - Краткая подсказка: Грациозны и наблюдательны, склонны к магии и тонким искусствам.
  - Полная подсказка: Эльфы живут долго, ценят гармонию и искусство. Часто выбирают путь мага, следопыта или музыканта. Тяжёлые физические профессии могут быть ограничены сеттингом.

- id: `dwarf`
  - Наименование: Дварфы
  - Краткая подсказка: Выносливы и упорны, сильны в ремёслах и защите.
  - Полная подсказка: Дварфы славятся мастерством в ковке и стойкостью в бою. Часто становятся кузнецами, воинами или стражами. Склонность к магии встречается реже.

- id: `orc`
  - Наименование: Орки
  - Краткая подсказка: Мощные и решительные; отлично подходят для силовых путей.
  - Полная подсказка: Орки ценят силу и честь. Искусства и тонкая магия даются сложнее, зато они преуспевают в воинах, наёмниках и гладиаторах.

- id: `halfling`
  - Наименование: Полурослики
  - Краткая подсказка: Наблюдательны и ловки; часто выбирают мирные занятия.
  - Полная подсказка: Полурослики предпочитают спокойную жизнь, ремёсла и торговлю. Хорошо проявляют себя в следопытах, ворах и ремесленниках.

Пример возможных ограничений (реализация зависит от сеттинга):
- Эльфам недоступна профессия «Гладиатор».
- Дварфам недоступна профессия «Следопыт».
- Оркам недоступны профессии «Жрец», «Купец», «Следопыт».

---

### Предыстория

Выбирается ровно одна. Влияет на доступность профессии и модификаторы характеристик/навыков.

- id: `noble`
  - Наименование: Дворянин
  - Краткая подсказка: Воспитан в достатке и традициях.
  - Полная подсказка: Связи и образование открывают путь к дипломатии, управлению и редким профессиям.

- id: `street_child`
  - Наименование: Дитя улиц
  - Краткая подсказка: Выжил на улицах, опираясь на смекалку и ловкость.
  - Полная подсказка: Формальной профессии не имеет. Вместо экрана «Профессия» появляется «Способ выживать» (обязательный выбор).

- id: `guild_apprentice`
  - Наименование: Подмастерье гильдии
  - Краткая подсказка: Раннее обучение ремеслу или торговле.
  - Полная подсказка: Доступ к профессиям ремесленника, кузнеца, купца; упрощённый старт в гильдиях.

- id: `scholar`
  - Наименование: Ученик академии
  - Краткая подсказка: База знаний и доступ к библиотекам.
  - Полная подсказка: Облегчает выбор профессий мага, писца, исследователя.

- id: `soldier`
  - Наименование: Ветеран
  - Краткая подсказка: Опыт строевой службы и дисциплина.
  - Полная подсказка: Облегчает доступ к профессиям воина, стража, наёмника.

---

### Профессия (если применяется)

Выбирается ровно одна, кроме случая `Дитя улиц` (см. «Способ выживать»). Некоторые профессии могут становиться недоступными в зависимости от `Расы` или `Предыстории`.

- id: `warrior`
  - Наименование: Воин
  - Краткая подсказка: Силовые решения, ближний бой.
  - Полная подсказка: Специалист по оружию и броне; ценится в охране, армии и на арене.

- id: `mage`
  - Наименование: Маг
  - Краткая подсказка: Владение заклинаниями и теорией арканы.
  - Полная подсказка: Требует серьёзной подготовки и доступа к источникам знаний; синергирует с предысторией «Ученик академии».

- id: `ranger`
  - Наименование: Следопыт
  - Краткая подсказка: Навигация, выслеживание, дальний бой.
  - Полная подсказка: Эффективен в дикой местности; популярен у эльфов и полуросликов.

- id: `blacksmith`
  - Наименование: Кузнец
  - Краткая подсказка: Ремесло металла и изготовление снаряжения.
  - Полная подсказка: Производит оружие/доспехи; усиливает экономику отряда.

- id: `merchant`
  - Наименование: Купец
  - Краткая подсказка: Торговля, переговоры, логистика.
  - Полная подсказка: Специалист по сделкам и маршрутам; выигрывает от происхождения «Дворянин».

- id: `priest`
  - Наименование: Жрец
  - Краткая подсказка: Вера и поддержка.
  - Полная подсказка: Лечение, благословения, поддержка от божеств; возможны религиозные ограничения по расам/культурам.

- id: `thief`
  - Наименование: Вор
  - Краткая подсказка: Скрытность и ловкость рук.
  - Полная подсказка: Взлом, карманные кражи, разведка; может конфликтовать с «Дворянин» по репутационным причинам (вариант виден, но заблокирован с пояснением).

- id: `gladiator`
  - Наименование: Гладиатор
  - Краткая подсказка: Бои на арене ради зрелищ.
  - Полная подсказка: Требует физической подготовки и контрактов; у некоторых рас/культур вариант может быть ограничён.

Жёсткие ограничения совместимости по расам (см. также раздел «Правила доступности»):
- Эльф → недоступна профессия «Гладиатор».
- Дварф → недоступна профессия «Следопыт».
- Орк → недоступны профессии «Жрец», «Купец», «Следопыт».

---

### Способ выживать (для предыстории «Дитя улиц»)

Если выбрана предыстория `Дитя улиц`, вместо профессии необходимо выбрать один из способов выживания.

- id: `begging`
  - Наименование: Попрошайничество
  - Краткая подсказка: Выживание за счёт милостыни.
  - Полная подсказка: Развитая наблюдательность и социальная гибкость, но низкий доступ к формальному обучению.

- id: `pickpocket`
  - Наименование: Карманные кражи
  - Краткая подсказка: Быстрые руки и ноги.
  - Полная подсказка: Высокие риски, но развивает ловкость, скрытность и бдительность.

- id: `errand_runner`
  - Наименование: Мальчишка на побегушках
  - Краткая подсказка: Мелкие поручения за еду и кров.
  - Полная подсказка: Знает городские тропы и укрытия, заводит полезные знакомства в трущобах.

- id: `pit_fighter`
  - Наименование: Уличные бои
  - Краткая подсказка: Ставки, драки, тренировка выносливости.
  - Полная подсказка: Закаляет характер и тело; добавляет сомнительную репутацию.

- id: `smuggler_helper`
  - Наименование: Помощник контрабандиста
  - Краткая подсказка: Нелегальные перевозки и схроны.
  - Полная подсказка: Опыт с рисковыми операциями, скрытыми маршрутами и связями в подполье.

- id: `prostitution`
  - Наименование: Проституция
  - Краткая подсказка: Продажа интимных услуг.
  - Полная подсказка: Социальная уязвимость и риски; развивает навыки общения и манипуляции, но добавляет стигму.

---

### Хобби (множественный выбор)

Пользователь может выбрать несколько хобби. Они могут давать лёгкие бонусы к навыкам/ролевым проверкам и flavor-подсказки для игры.

- id: `hunting` — Наименование: Охота
  - Краткая подсказка: Выслеживание дичи, установка ловушек.
  - Полная подсказка: Улучшает навыки выживания и меткости в дикой местности.

- id: `fishing` — Наименование: Рыбалка
  - Краткая подсказка: Снасти и терпение.
  - Полная подсказка: Небольшие бонусы к выживанию у воды и обеспечению продовольствием.

- id: `cooking` — Наименование: Кулинария
  - Краткая подсказка: Приготовление полезной еды.
  - Полная подсказка: Повышает мораль и дает малые баффы вне боя.

- id: `music` — Наименование: Музыка
  - Краткая подсказка: Игра на инструментах.
  - Полная подсказка: Поддерживает социальные проверки, вдохновляет союзников.

- id: `herbalism` — Наименование: Травничество
  - Краткая подсказка: Сбор и использование трав.
  - Полная подсказка: Позволяет готовить простые настойки и мази.

- id: `crafting` — Наименование: Ремесло
  - Краткая подсказка: Мелкие поделки, починка.
  - Полная подсказка: Небольшие бонусы к созданию/починке снаряжения.

- id: `calligraphy` — Наименование: Каллиграфия
  - Краткая подсказка: Красивое письмо.
  - Полная подсказка: Повышает успехи в переписке, копировании карт и манускриптов.

- id: `painting` — Наименование: Живопись
  - Краткая подсказка: Изобразительное искусство.
  - Полная подсказка: Социальный эффект и возможность продавать картины.

- id: `board_games` — Наименование: Настольные игры
  - Краткая подсказка: Стратегия и удача.
  - Полная подсказка: Незначительные бонусы к планированию и блефу.

---

### Характеристики

Экран характеристик использует общий бюджет очков: 75. Конкретные минимумы/максимумы и формулы модификаторов согласуются отдельно; ниже приведён эталонный набор характеристик с подсказками.

Список характеристик:

- id: `strength` — Наименование: Сила
  - Краткая подсказка: Физическая мощь и урон в ближнем бою.
  - Полная подсказка: Влияет на переносимый вес, рукопашный урон и некоторые проверки атлетики.

- id: `dexterity` — Наименование: Ловкость
  - Краткая подсказка: Координация и точность.
  - Полная подсказка: Влияет на уклонение, инициативу, точность дальнего боя и скрытность.

- id: `constitution` — Наименование: Телосложение
  - Краткая подсказка: Выносливость и стойкость.
  - Полная подсказка: Определяет запас сил/здоровья, сопротивляемость болезням и усталости.

- id: `intelligence` — Наименование: Интеллект
  - Краткая подсказка: Память и логика.
  - Полная подсказка: Важен для обучения, исследований и заклинаний разума.

- id: `wisdom` — Наименование: Мудрость
  - Краткая подсказка: Внимание и интуиция.
  - Полная подсказка: Влияет на восприятие, инстинкты и сопротивление влиянию.

- id: `charisma` — Наименование: Харизма
  - Краткая подсказка: Обаяние и влияние.
  - Полная подсказка: Важна для переговоров, лидерства и некоторых школ магии.

- id: `luck` — Наименование: Удача
  - Краткая подсказка: Случай благоволит подготовленным.
  - Полная подсказка: Небольшое влияние на броски/проверки, может срабатывать как редкий бонус.

Примечания по ограничениям и модификаторам:
- Бюджет: 75 очков на распределение между характеристиками.
- Предлагаемый базовый диапазон (пример): минимум 1, максимум 20 на характеристику; точные значения согласуются дополнительно.
- Расовые/предысторийные/профессиональные модификаторы могут временно отображаться как расчётные (итоговые) значения, не расходующие бюджет, но влияющие на проверки.

---

### Правила доступности и подсказки причин блокировки

Каждый вариант может быть недоступен по одной или нескольким динамическим причинам. В UI необходимо показывать вариант в списке, визуально блокировать выбор и при наведении выводить краткое пояснение причины.

Примеры причин:
- Конфликт расы и профессии.
- Отсутствие требуемой предыстории.
- Взаимные ограничения сеттинга/культуры/фракций.

Жёсткие правила совместимости (реализовать как недоступные варианты с пояснением причины):
- По расе → профессии:
  - Эльф → недоступна профессия «Гладиатор».
  - Дварф → недоступна профессия «Следопыт».
  - Орк → недоступны профессии «Жрец», «Купец», «Следопыт».
- По профессии → хобби:
  - Кузнец → недоступно хобби «Травничество».
- По расе → хобби:
  - Орк → недоступны хобби «Каллиграфия», «Живопись».

#### Единый формат кодов причин (reason codes)

Для локализации и устойчивых проверок используйте коды причин блокировок:

- Формат кода: `DOMAIN.CATEGORY.KEY[.QUALIFIER]`
  - Примеры доменов: `RACE`, `BACKGROUND`, `PROFESSION`, `HOBBY`.
  - Примеры категорий: `INCOMPATIBLE`, `REQUIRES`, `CULTURE_RULE`.
  - `KEY` — стабильный идентификатор сущности (см. id в справочниках).
  - `QUALIFIER` — опциональная конкретизация (например, требуемая сущность).

Рекомендуемый набор кодов для текущих правил:

- `RACE.INCOMPATIBLE.elf.PROFESSION.gladiator`
- `RACE.INCOMPATIBLE.dwarf.PROFESSION.ranger`
- `RACE.INCOMPATIBLE.orc.PROFESSION.priest`
- `RACE.INCOMPATIBLE.orc.PROFESSION.merchant`
- `RACE.INCOMPATIBLE.orc.PROFESSION.ranger`
- `PROFESSION.INCOMPATIBLE.blacksmith.HOBBY.herbalism`
- `RACE.INCOMPATIBLE.orc.HOBBY.calligraphy`
- `RACE.INCOMPATIBLE.orc.HOBBY.painting`

Рекомендации по отображению:
- Краткая подсказка: локализованный заголовок по `reason code`.
- Полная подсказка (Tab): расширенное описание (контекст, варианты обхода, если применимо).

Формулировки для подсказок причин блокировки должны быть краткими («Требуется предыстория: Ученик академии») и разворачиваемыми в полную версию при нажатии Tab («Для обучения магии требуется доступ к арканной школе и базовое образование»).

---

### Замечания по масштабированию справочников

- Справочники могут расти до больших объёмов; рекомендуется ленивая загрузка, кеширование и фильтры по типу/категориям.
- Ключи (`id`) стабильны и используются в доменном слое; локализация хранится отдельно в ресурсах строк.
- Изображения/ассеты для вариантов допускаются (до 4K); хранение и кеш — по требованиям производительности.


